<!DOCTYPE html>
<html>
<head><title>Simple Debug Test</title></head>
<body>
    <h1>Behavior Tracking Debug</h1>
    <button id="testBtn">Test API Call</button>
    <div id="output"></div>
    
    <script>
    document.getElementById('testBtn').addEventListener('click', async () => {
        const output = document.getElementById('output');
        output.innerHTML = 'Testing...';
        
        try {
            const testData = {
                userId: 'browser-test-' + Date.now(),
                behaviorData: {
                    trackingData: {
                        mouseMovements: [{x: 100, y: 200, timestamp: Date.now()}],
                        keystrokes: [],
                        clicks: [],
                        sessionMetrics: {
                            startTime: Date.now() - 5000,
                            totalMouseDistance: 50,
                            interactionCount: 1
                        }
                    },
                    processed: {
                        mouseVelocity: 1.5,
                        keystrokeRhythm: 0.8
                    }
                }
            };
            
            console.log('Sending test data:', testData);
            
            const response = await fetch('/api/behavior/track', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(testData)
            });
            
            const result = await response.json();
            
            output.innerHTML = `
                <h3>Response Status: ${response.status}</h3>
                <pre>${JSON.stringify(result, null, 2)}</pre>
            `;
            
            console.log('API Response:', result);
            
        } catch (error) {
            output.innerHTML = `<h3>Error: ${error.message}</h3>`;
            console.error('Test failed:', error);
        }
    });
    </script>
</body>
</html>
